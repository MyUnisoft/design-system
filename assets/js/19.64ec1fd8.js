(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[19],{84019:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return rt}});var o=n(92137),a=n(87757),i=n.n(a),r=n(56998),c=n(40323),s=n(47424),l=n(87382),m=n(67294),u=n(83216),d=n(99039),f=n(19756),g=n(23615),p=n.n(g),b=n(22122),y=n(75929),C=n(54344),v=n(89e3),E=["#ffd204","#a177ff","#fe3a5e","#ad69c5","#50e3c2"],h=function(e){var t=function(e){for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return t}(e)%E.length;return E[t]},x=n(61320),N=n.n(x),I="avatarImage_Sdez",T="avatarInfo_3Exb",j=(0,m.memo)((function(e){var t,n=e.initials,o=e.name,a=e.isEdited,i=e.date,r=e.avatarImgSrc,c=e.classes;return m.createElement(m.Fragment,null,m.createElement("div",{className:I},m.createElement(y.Z,{src:r,alt:n,style:r?null:{backgroundColor:h(o)}},n)),m.createElement("div",{className:T},m.createElement(C.Z,{classes:{root:c.name},variant:"body1",display:"inline"},o),a&&m.createElement(C.Z,{classes:{root:c.test},display:"inline"}," "+d.Z.t("commentBox.historyCommentSuffix")),m.createElement(C.Z,{classes:{root:c.date},variant:"subtitle2"},(t=i,N()(t,"YYYY-MM-DD HH:mm").calendar(null,{sameDay:"["+d.Z.t("date.sameDay")+"] HH:mm",nextDay:"["+d.Z.t("date.nextDay")+"] HH:mm",nextWeek:"["+d.Z.t("date.nextWeek")+"] HH:mm",lastDay:"["+d.Z.t("date.lastDay")+"] HH:mm",lastWeek:"DD/MM/YYYY HH:mm",sameElse:"DD/MM/YYYY HH:mm"})))))}));j.defaultProps={avatarImgSrc:"",isEdited:!1},j.propTypes={name:p().string.isRequired,avatarImgSrc:p().string,initials:p().string.isRequired,date:p().string.isRequired,isEdited:p().bool};var Z=(0,v.Z)((function(){return{name:{fontWeight:"bold",lineHeight:1,marginBottom:5},date:{color:"#9b9b9b"}}}))(j),M=n(31699),k=n.n(M),D=n(20373),S=n(89584),z=n(9334),R=(0,D.Z)((function(e){return{container:{border:"1px solid",borderColor:e.palette.common.grey,padding:10,display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}}})),w=function(e){var t=e.message,n=R(),o=t.body,a=t.name,i=k().sanitize(o,{KEEP_CONTENT:!1,ADD_ATTR:["target"],RETURN_DOM:!0}).getElementsByTagName("a")[0].href;if(void 0===r)var r={screenX:0,innerWidth:1280,open:function(){}};return m.createElement(S.Z,{className:n.container},m.createElement(C.Z,{variant:"h4"},d.Z.t("discussions.jistyMessage.name",{who:a})),m.createElement(z.Z,{color:"primary",variant:"contained",onClick:function(){r.open(i,"_blank")}},"Join"))};w.propTypes={message:p().shape({name:p().string.isRequired,body:p().string.isRequired}).isRequired};var L=(0,m.memo)(w),_=n(90547),O=n(60042),P=n.n(O),H=n(57704),B=n(54139),G=n(83306),Y=n(82920),A=n(13456),U=n(89416),q=(0,D.Z)((function(e){return{divAttachToNotes:{marginTop:10},formControl:{margin:e.spacing(1),minWidth:120}}})),W=function(e){var t=e.defaultDossierId,n=e.notesInfo,a=e.setNotesInfo,r=e.defaultCycleId,c=q(),s=(0,m.useState)([]),l=s[0],u=s[1],f=(0,m.useState)([]),g=f[0],p=f[1],b=(0,m.useState)(!1),y=b[0],C=b[1],v=function(e){var t=Object.assign({},n,e);a(t)},E=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),v({dossier_revision_id:t,cycle_da_dp_id:""}),u([]),C(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){(0,o.Z)(i().mark((function e(){var t,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),t=function(e,t){return e[t]},n=function(e){var n=t(e,"type"),o=t(e,"start_date"),a=t(e,"end_date"),i=d.Z.t("common.fromLowerCase")+" "+N()(o).format("DD/MM/YYYY")+" "+d.Z.t("common.to")+"  "+N()(a).format("DD/MM/YYYY");return d.Z.t("dadp.review.types."+n)+" "+i},o=[].map((function(e){return{id:e.id_dossier_revision,label:n(e),start_date:e.start_date,end_date:e.end_date}})),p(o),C(!1);case 7:case"end":return e.stop()}}),e)})))()}),[]),(0,m.useEffect)((function(){g.length&&t&&E(t)}),[g]),(0,m.useEffect)((function(){l.length&&(r&&l.find((function(e){return e.cycle_da_dp_id===r}))?v({cycle_da_dp_id:r}):v({cycle_da_dp_id:l[0].cycle_da_dp_id}))}),[l]),m.createElement("div",{className:c.divAttachToNotes},m.createElement(B.Z,{className:c.formControl},m.createElement(G.Z,{shrink:!0,id:"dossier-revision"},d.Z.t("commentBox.dossierRevision"),y&&m.createElement(U.Z,{size:15,inline:!0})),m.createElement(Y.Z,{autoWidth:!0,labelId:"dossier-revision",value:n.dossier_revision_id||"",onChange:function(e){return E(e.target.value)}},g.map((function(e){return m.createElement(A.Z,{key:e.id,value:e.id},e.label)})))),m.createElement(B.Z,{className:c.formControl},m.createElement(G.Z,{shrink:!0,id:"cycles"},d.Z.t("commentBox.cycle"),y&&m.createElement(U.Z,{size:15,inline:!0})),m.createElement(Y.Z,{autoWidth:!0,labelId:"cycles",value:n.cycle_da_dp_id||"",onChange:function(e){return v({cycle_da_dp_id:e.target.value})}},l.map((function(e){return m.createElement(A.Z,{key:e.cycle_da_dp_id,value:e.cycle_da_dp_id},e.label)})))))};W.defaultProps={defaultDossierId:0,defaultCycleId:0},W.propTypes={defaultDossierId:p().number,notesInfo:p().object.isRequired,setNotesInfo:p().func.isRequired,defaultCycleId:p().number,getReviewsForZoneComments:p().func.isRequired,getCyclesForZoneComments:p().func.isRequired};var J=W,Q=n(3272),K=(0,D.Z)((function(){return{container:{position:"relative",zIndex:5},colorPickerContainer:{position:"absolute",left:"50%",top:"100%",transform:"translateX(-50%)"},iconContainer:{border:"1px solid #F1F1F1",cursor:"pointer",padding:5,minWidth:25,height:20,borderRadius:2,margin:"0px 4px",display:"flex",justifyContent:"center",alignItems:"center",background:"white",textTransform:"capitalize","&:hover":{boxShadow:"1px 1px 0px #BFBDBD"}},iconImg:{maxWidth:"100%",maxHeight:"100%"}}})),F=function(e){var t,n=e.expanded,o=e.onExpandEvent,a=K(),i=function(e){e.stopPropagation()},r=function(t){var n=e.onChange;n("color",t.hex)};return m.createElement("div",{"aria-haspopup":"true","aria-expanded":n,"aria-label":"rdw-color-picker",className:a.container},m.createElement("div",{onClick:o,role:"button",tabIndex:"0",className:a.iconContainer},m.createElement("img",{className:a.iconImg,src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDQ5NS41NzggNDk1LjU3OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDk1LjU3OCA0OTUuNTc4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPGc+CgkJPHBhdGggc3R5bGU9ImZpbGw6I0U2QkU5NDsiIGQ9Ik00MzkuMjA4LDIxNS41NzhjLTQ2Ljk3NS01My41MjktOTYtNjUuOTczLTk2LTEyNWMwLTY0LjMzMy01NC4zMzMtMTEzLjY2Ny0xNDkuNDI5LTc5LjMyMQoJCQlDOTEuODE2LDQ4LjA4MywyMS4yMDgsMTM2LjkxMSwyMS4yMDgsMjQ3LjU3OGMwLDEzNi45NjYsMTExLjAzMywyNDgsMjQ4LDI0OGMyMi41MjcsMCw0NC4zNTQtMy4wMDQsNjUuMDk5LTguNjMybC0wLjAwNi0wLjAyNgoJCQlDNDM5LjIwOCw0NTYuNTc4LDUyNS4yMDgsMzEzLjU3OCw0MzkuMjA4LDIxNS41Nzh6IE0zMzMuNzA5LDE4OS42OWMtMTQuNTAxLDE4LjU1NS01NC42NjgsNy43MDctNzAuMTctMTguNTQ3CgkJCWMtMTMuNjY0LTIzLjE0LTguNjY0LTU2LjIzMiwxNC45ODgtNzAuODIyYzEzLjcxLTguNDU3LDMxLjc5MS0wLjEzNSwzNS4yMzEsMTUuNjAyYzIuOCwxMi44MDYsOC41NDMsMjguNjcxLDIwLjIzOSw0My4xODcKCQkJQzM0MS4xMjUsMTY3Ljk2LDM0MC43MDcsMTgwLjczNiwzMzMuNzA5LDE4OS42OXoiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6I0ZGNEYxOTsiIGN4PSIxNjUuMDk4IiBjeT0iMTM1LjY4OCIgcj0iNDcuODkiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6I0ZGOEM2MjsiIGN4PSIxNzYuOTQiIGN5PSIxMjMuNzE1IiByPSIxNi43NjIiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6I0ZGQ0QwMDsiIGN4PSIxMTcuMDk4IiBjeT0iMjU1LjY4OCIgcj0iNDcuODkiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6I0ZGRTY3MTsiIGN4PSIxMjguOTQiIGN5PSIyNDMuNzE1IiByPSIxNi43NjIiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6IzAwQzM3QTsiIGN4PSIxNzIuODc5IiBjeT0iMzY3LjQ2OSIgcj0iNDcuODkiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6IzYwREM0RDsiIGN4PSIxODQuNzIiIGN5PSIzNTUuNDk2IiByPSIxNi43NjIiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6IzRDRDdGRjsiIGN4PSIyOTMuMDk4IiBjeT0iNDA3LjY4OCIgcj0iNDcuODkiLz4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgc3R5bGU9ImZpbGw6I0FFRUZGRjsiIGN4PSIzMDQuOTM5IiBjeT0iMzk1LjcxNSIgcj0iMTYuNzYyIi8+Cgk8L2c+Cgk8Zz4KCQk8Y2lyY2xlIHN0eWxlPSJmaWxsOiMwMDlCQ0E7IiBjeD0iMzgxLjA5OCIgY3k9IjMxOS40NjkiIHI9IjQ3Ljg5Ii8+Cgk8L2c+Cgk8Zz4KCQk8Y2lyY2xlIHN0eWxlPSJmaWxsOiM0Q0Q3RkY7IiBjeD0iMzkyLjkzOSIgY3k9IjMwNy40OTYiIHI9IjE2Ljc2MiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",alt:"Color picker icon"})),n&&(t=e.currentState.color,m.createElement("div",{onClick:i,className:a.colorPickerContainer},m.createElement(Q.if,{color:t,onChangeComplete:r}))))};F.defaultProps={expanded:void 0},F.propTypes={expanded:p().bool,onExpandEvent:p().func.isRequired,onChange:p().func.isRequired,currentState:p().object.isRequired};var X=F,V=n(72072),$=n.n(V),ee=n(67573),te=n.n(ee),ne=function(e){var t=te()(e);if(!t)return"";var n=H.ContentState.createFromBlockArray(t.contentBlocks);return H.EditorState.createWithContent(n)},oe=function(e){return $()((0,H.convertToRaw)(e.getCurrentContent())).replace(/(\n)/g,"")},ae=n(62460),ie=n(89829),re=n(35311),ce=n(61247),se=["attachToNotes","attachToInternalNotes","attachToAccount","attachToOther","attachToDiligence","attachToConfirmationLetter"],le=function(e){var t=e.name,n=e.checked,o=e.handleChange,a=e.className;return m.createElement(ae.Z,{control:m.createElement(ie.Z,{checked:!!n,onChange:o(t),value:t,disabled:"attachToNotes"!==t,color:"primary"}),label:d.Z.t("commentBox."+t),className:a})},me=function(e){var t=e.onChange,n=e.classes,o=e.state,a=function(e){return function(n){t(e,n.target.checked)}};return m.createElement(B.Z,{component:"fieldset"},m.createElement(re.Z,{component:"legend",className:n.labelRoot,focused:!1},d.Z.t("commentBox.attachToTitle")),m.createElement(ce.Z,{row:!0},se.map((function(e){return m.createElement(le,{className:n.formControlLabel,checked:o[e],name:e,handleChange:a,key:e})}))))};me.propTypes={onChange:p().func.isRequired,classes:p().object.isRequired,state:p().object.isRequired};var ue=(0,v.Z)((function(){return{labelRoot:{color:"#000",marginBottom:10},formControlLabel:{marginBottom:5}}}))(me),de=n(43751),fe="container_2HCB",ge=m.memo((function(e){var t=e.onCancel,n=e.onSubmit,o=e.disabled,a=[{_type:"string",color:"default",variant:"outlined",text:d.Z.t("commentBox.buttons.cancel"),onClick:t},{_type:"string",color:"primary",text:d.Z.t("commentBox.buttons.submit"),onClick:n,disabled:o}];return m.createElement("div",{className:fe},m.createElement(de.CE,{buttons:a}))}));ge.defaultProps={disabled:!1},ge.propTypes={onCancel:p().func.isRequired,onSubmit:p().func.isRequired,disabled:p().bool};var pe=ge,be="wrapperContainer_3PIT",ye="toolbarContainer_1B43",Ce="editorContainer_2oKg",ve="textEditorWrapper_2otg",Ee="editorOverlay_37fO",he={options:["inline","list","colorPicker","link","emoji","history"],inline:{options:["bold","italic","underline"]},list:{options:["unordered"]},colorPicker:{component:X}},xe={body:"",attachTo:{}},Ne=function(e){var t=e.className,n=e.onSubmit,a=e.onCancelCustom,r=e.hideOptions,c=e.body,s=e.isLoading,l=e.openConfirmationDialog,f=e.closeDialog,g=e.createMode,p=e.toolbarHidden,b=e.confirmCancel,y=e.canSave,C=(0,m.useState)(ne(c)),v=C[0],E=C[1],h=(0,m.useState)(xe),x=h[0],N=h[1],I=(0,m.useState)(null),T=I[0],j=I[1],Z=function(e){N(Object.assign({},x,{body:oe(e)})),E(e)},M=(0,m.useMemo)((function(){return y(x.body)}),[x]);(0,m.useEffect)((function(){Z(ne(c))}),[c]),(0,m.useEffect)((function(){T&&T.focus()}),[T]);var k=function(){a&&a(),E(H.EditorState.createEmpty()),N(xe),f()},D=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({body:x.body,attachTo:x.attachTo});case 2:E(H.EditorState.createEmpty()),N(xe),g&&f();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){var t=Object.assign({},x,{attachTo:Object.assign({},x.attachTo,{attachToNotes:e})});N(t)};return m.createElement("div",{className:P()(ve,t)},m.createElement(u.Editor,{editorState:v,wrapperClassName:be,toolbarClassName:ye,editorClassName:Ce,onEditorStateChange:Z,toolbar:he,toolbarHidden:p,editorRef:j}),!r&&m.createElement(m.Fragment,null,m.createElement("br",null),m.createElement(ue,{onChange:function(e,t){var n,o=Object.assign({},x,{attachTo:Object.assign({},x.attachTo,(n={},n[e]={},n))});t||delete o.attachTo[e],N(o)},state:x.attachTo}),x.attachTo.hasOwnProperty("attachToNotes")&&m.createElement(J,{setNotesInfo:S,notesInfo:x.attachTo.attachToNotes})),m.createElement(pe,{disabled:x.body===c||!x.body||!M,onSubmit:D,onCancel:function(){b&&x.body!==c?l({title:d.Z.t("notifications.warning"),body:d.Z.t("notifications.canLoseChanges"),buttons:[{_type:"string",text:d.Z.t("notifications.yes"),onClick:k,color:"error",variant:"outlined"},{_type:"string",text:d.Z.t("notifications.no"),color:"default",variant:"outlined"}]}):k()}}),s&&m.createElement("div",{className:Ee},m.createElement(U.Z,null)))};Ne.defaultProps={className:"",onCancelCustom:void 0,hideOptions:!1,body:"",createMode:!1,toolbarHidden:!1,confirmCancel:!0,canSave:function(){return!0}},Ne.propTypes={className:p().string,onSubmit:p().func.isRequired,isLoading:p().bool.isRequired,onCancelCustom:p().func,hideOptions:p().bool,body:p().string,openConfirmationDialog:p().func.isRequired,closeDialog:p().func.isRequired,createMode:p().bool,toolbarHidden:p().bool,confirmCancel:p().bool,canSave:p().func};var Ie=Ne,Te=n(38026),je=p().shape({name:p().string.isRequired,body:p().string.isRequired,avatarImgSrc:p().string,initials:p().string.isRequired,date:p().string.isRequired}),Ze=p().shape(Object.assign({},je,{history:p().arrayOf(je)})),Me=(p().arrayOf(Ze),n(78661)),ke={commentContainer:"commentContainer_3SjV",mainComment:"mainComment_1uEC",message:"message_3KTp",messageButton:"messageButton_1HZO",inactiveReactions:"inactiveReactions_1ifv",semiActiveReactions:"semiActiveReactions_3Jck",activeReactions:"activeReactions_13yf",highlightHover:"highlightHover_izwg",reaction:"reaction_3SIH",historyComment:"historyComment_282F",button:"button_3Yor",editButton:"editButton_2DRy",content:"content_HYot"},De=function(e){var t,n=e.isEdited,o=e.canEdit,a=e.onEdit,i=e.canReact,r=e.onReact,c=e.reactions,s=e.message,l=e.onClick,u=e.toolbarHidden,d=e.confirmCancel,f=e.highlightHover,g=e.canSave,p=(0,m.useMemo)((function(){var e;return P()(ke.commentContainer,((e={})[ke.historyComment]=n,e[ke.mainComment]=!n,e[ke.highlightHover]=f,e))}),[n]),b=(0,m.useState)(!1),y=b[0],v=b[1],E=(0,m.useState)(!1),h=E[0],x=E[1];if(y)return m.createElement(Ie,{body:s.body,onSubmit:function(e){e.body&&e.body!==s.body?(x(!0),a(Object.assign({},s,{body:e.body}),s),v(!1),x(!1)):v(!1)},isLoading:h,onCancelCustom:function(){v(!1)},hideOptions:!0,toolbarHidden:u,confirmCancel:d,canSave:g});var N=k().sanitize(s.body,{KEEP_CONTENT:!1,ADD_ATTR:["target"]}),I=m.createElement(m.Fragment,null,m.createElement("div",{className:ke.message},m.createElement(C.Z,{variant:"body1",classes:{root:ke.content},dangerouslySetInnerHTML:{__html:N}})),!n&&o&&m.createElement(_.Z,{className:P()(ke.messageButton,ke.highlightButtonHover),onClick:function(){v(!0)}},m.createElement(Me.x,{name:"icon-pencil"})),i&&m.createElement(_.Z,{className:P()(ke.messageButton,(t={},t[ke.inactiveReactions]=!c||"inactive"===c,t[ke.semiActiveReactions]="semiActive"===c,t[ke.activeReactions]="active"===c,t[ke.highlightButtonHover]=i,t)),onClick:function(){i&&r&&r({message:s})}},m.createElement(Me.x,{className:P()(ke.reaction),name:"icon-smiley"})));return l?m.createElement(Te.Z,{fullWidth:!0,component:"div",classes:{root:ke.button},onClick:l},I):m.createElement("div",{className:p},I)};De.defaultProps={isEdited:!1,canEdit:!0,onEdit:function(){},canReact:!1,onReact:function(){},reactions:null,toolbarHidden:!1,confirmCancel:!1,onClick:void 0,highlightHover:!0,canSave:function(){return!0}},De.propTypes={message:je.isRequired,isEdited:p().bool,canEdit:p().bool,onEdit:p().func,canReact:p().bool,onReact:p().func,reactions:p().string,toolbarHidden:p().bool,confirmCancel:p().bool,onClick:p().func,highlightHover:p().bool,canSave:p().func};var Se=(0,m.memo)(De),ze=n(461),Re=n.n(ze),we="all_1XwH",Le="item_2_wQ",_e="button_178p",Oe=["attachments","onDelete"],Pe=(0,m.memo)((function(e){var t=e.attachments,n=e.onDelete,o=(0,f.Z)(e,Oe);return m.createElement("div",(0,b.Z)({className:we},o),t.map((function(e,t){return m.createElement("div",{className:Le,key:e.id+"-"+t},m.createElement("a",{key:e.id+"-link",className:_e,href:e.url,target:"_blank",rel:"noopener noreferrer"},m.createElement(Me.x,{name:"icon-attachment",color:null}),m.createElement("span",null,e.nom_original||e.libelle,"\xa0",e.size&&"("+Re()(e.size)+")")),m.createElement("button",{key:e.id+"-close",type:"button",className:_e,onClick:function(){return n(e)}},"\u274c"))})))}));Pe.propTypes={attachments:p().arrayOf(p().shape({id_document:p().oneOfType([p().string,p().number]),nom_original:p().string,size:p().number})),onClick:p().func,onDelete:p().func},Pe.defaultProps={attachments:[],onClick:function(){return null},onDelete:function(){return null}};var He=Pe,Be=p().shape({name:p().string.isRequired,body:p().string.isRequired,avatarImgSrc:p().string,initials:p().string.isRequired,date:p().string.isRequired}),Ge=p().shape(Object.assign({},Be,{history:p().arrayOf(Be)})),Ye=(p().arrayOf(Ge),"container_2NIB"),Ae="header_3gZP",Ue=["message","canEdit","onEdit","canReact","onReact","historyState","toolbarHidden","confirmCancel","classes","reactions","attachments","onAttachmentDelete","bodyProps"],qe=function(e){var t=e.message,n=e.canEdit,o=e.onEdit,a=e.canReact,i=e.onReact,r=e.historyState,c=e.toolbarHidden,s=e.confirmCancel,l=e.classes,u=e.reactions,d=e.attachments,g=e.onAttachmentDelete,p=e.bodyProps,y=(0,f.Z)(e,Ue),C=t.avatarImgSrc,v=t.initials,E=t.name,h=t.date,x=t.jisty;return m.createElement("div",(0,b.Z)({className:P()(Ye,l)},y),m.createElement("div",{className:Ae},m.createElement(Z,{initials:v,name:E,isEdited:r,avatarImgSrc:C,date:h})),x?m.createElement(L,{message:t}):m.createElement(Se,(0,b.Z)({message:t,canEdit:n,onEdit:o,isEdited:r,canReact:a,onReact:i,reactions:u,toolbarHidden:c,confirmCancel:s},p)),d.length>0&&m.createElement(He,{attachments:d,onDelete:g}))};qe.propTypes={message:Be.isRequired,historyState:p().bool,canEdit:p().bool,onEdit:p().func,canReact:p().bool,onReact:p().func,reactions:p().string,toolbarHidden:p().bool,confirmCancel:p().bool,classes:p().string,attachments:p().arrayOf(p().shape({id_document:p().oneOfType([p().string,p().number]),nom_original:p().string,size:p().number})),onAttachmentDelete:p().func,bodyProps:p().object},qe.defaultProps={historyState:!1,canEdit:!0,onEdit:function(){},canReact:!1,onReact:function(){},toolbarHidden:!1,confirmCancel:!0,reactions:null,classes:null,attachments:[],onAttachmentDelete:function(){},bodyProps:{}};var We=qe,Je=(0,D.Z)((function(){return{container:{display:"flex",flexDirection:"column",marginTop:10},commentListContainer:{borderLeft:"1px solid #d0d0d0",display:"flex",flexDirection:"column",paddingLeft:13,marginTop:16},commentWrapper:{marginTop:20,"&:first-child":{marginTop:0}}}})),Qe=(0,D.Z)((function(e){return{showHistory:{cursor:"pointer",color:e.palette.primary.main,fontWeight:"bold"}}})),Ke=(0,m.memo)((function(e){var t=e.history,n=(0,m.useState)(!1),o=n[0],a=n[1],i=Qe(),r=Je();return m.createElement("div",{className:r.container},m.createElement(C.Z,{onClick:function(){a(!o)},classes:{root:i.showHistory}},(0,m.useMemo)((function(){return o?d.Z.t("commentBox.hideHistory"):d.Z.t("commentBox.showHistory")}),[o])),o&&m.createElement("div",{className:r.commentListContainer},t.map((function(e,t){return m.createElement("div",{className:r.commentWrapper,key:t},m.createElement(We,{message:e,historyState:!0}))}))))}));Ke.propTypes={history:p().arrayOf(je)},Ke.defaultProps={history:[]};var Fe=Ke,Xe=(0,D.Z)((function(){return{container:{width:"100%",display:"flex",flexDirection:"column"}}})),Ve=["history"],$e=function(e){var t=Xe(),n=e.comment,o=e.onEdit,a=e.canEdit,i=e.hasHistory,r=n.history,c=(0,f.Z)(n,Ve);return m.createElement("div",{className:t.container},m.createElement(We,{message:c,onEdit:o,canEdit:a}),i&&m.createElement(Fe,{history:r}))};$e.propTypes={comment:p().object,onEdit:p().func,canEdit:p().bool,hasHistory:p().bool},$e.defaultProps={onEdit:function(){},comment:{},canEdit:!0,hasHistory:!0};var et=$e,tt=n(12685),nt=n(258),ot=n(71308),at={options:["inline","list","colorPicker","link","emoji","history"],inline:{options:["bold","italic","underline"]},list:{options:["unordered"]},colorPicker:{component:X}},it={body:"",attachTo:{}},rt=function(e){var t,n=e.isOpen,a=e.handleClose,f=e.data,g=e.columnIndex,p=e.handleGetComment,b=e.dataKey,y=(0,ot.Z)(),C=(0,tt.ZR)().config,v=(0,nt.Z)().service.comment,E=v.create,h=v.update,x=C.selectableRowKey,N=C.idSociety,I=C.columns,T=(void 0===I?[]:I)[g],j=(T.canEdit,T.commentKey),Z=void 0===j?"":j,M=T.location,k=void 0===M?"":M,D=(0,m.useState)(it),S=D[0],z=D[1],R=(0,m.useState)(null),w=R[0],L=R[1],_=(0,m.useState)(null),O=_[0],P=_[1];(0,m.useEffect)((function(){O&&O.focus()}),[O]);var H=function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(((t={location:k})[Z]=f[x],t.comment=oe(w),t),N);case 2:return L(null),e.next=5,p();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(((n={location:k})[Z]=f[x],n.comment=null==t?void 0:t.body,n),null==t?void 0:t.id,N);case 2:return e.next=4,p();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=[{_type:"string",text:d.Z.t("common.send"),onClick:H,size:"medium",color:"primary",variant:"contained"},{_type:"string",text:d.Z.t("common.cancel"),onClick:a,size:"medium",variant:"outlined",color:"default"}];return m.createElement(r.Z,{open:n,onClose:a,classes:{paper:y.paper}},m.createElement(c.Z,null,d.Z.t("common.comments")),m.createElement(s.Z,{classes:{root:y.root}},m.createElement("div",{className:y.editor},m.createElement(u.Editor,{editorState:w,wrapperClassName:y.wrapperContainer,toolbarClassName:y.toolbarContainer,editorClassName:y.editorContainer,onEditorStateChange:function(e){z(Object.assign({},S,{body:oe(e)})),L(e)},toolbar:at,editorRef:P})),m.createElement("div",{className:y.containerComment},null==(t=f[b])?void 0:t.map((function(e){return m.createElement("div",{key:e.id,className:y.separatorComment},m.createElement(et,{comment:e,onEdit:B,canEdit:!0,hasHistory:!1}))})))),m.createElement(l.Z,null,m.createElement(de.CE,{buttons:G})))}},43751:function(e,t,n){"use strict";n.d(t,{od:function(){return M},CE:function(){return N}});var o=n(92137),a=n(87757),i=n.n(a),r=n(67294),c=n(20373),s=((0,c.Z)((function(e){var t=e.palette.primary.main;return{content:{textAlign:"center",Zindex:1500,overflow:"visible"},button:{background:t,marginLeft:"20px"},footer:{margin:"50px",justifyContent:"space-evenly"},buttonValidate:{background:t,color:"white"}}})),n(31579)),l=n(89e3),m=n(60042),u=n.n(m),d=n(90547),f=n(23615),g=n.n(f),p=n(78661),b=n(38026),y=n(89416),C=n(69689),v=n.n(C),E=g().shape({_type:g().string.isRequired,iconName:g().string,className:g().string,text:g().string,onClick:g().func,color:g().string,iconSize:g().number,iconColor:g().string,disabled:g().bool,variant:g().string,titleInfoBulle:g().string}),h=function(e){var t=e.badgeContent,n=e.badgeColor,o=e.children;return t?r.createElement(s.Z,{badgeContent:t,color:n||"primary"},o):r.createElement(r.Fragment,null,o)},x=function(e){var t=e.buttons,n=e.marginDirection,a=e.classes,c=(0,r.useState)({}),l=c[0],m=c[1],f=(0,r.useState)(!1),g=f[0],C=f[1],E=(0,r.useRef)(!0);(0,r.useEffect)((function(){return function(){E.current=!1}}),[]);var x={left:a.marginLeft,right:a.marginRight,none:""}[n],N=function(){var e=(0,o.Z)(i().mark((function e(t,n){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.onClick){e.next=9;break}return e.prev=1,m(((o={})[n.text]=!0,o)),C(!0),e.next=6,n.onClick(t);case 6:return e.prev=6,E.current&&(m(((a={})[n.text]=!1,a)),C(!1)),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,n){return e.apply(this,arguments)}}();return t&&t.map((function(e,t){return e?r.createElement(r.Fragment,{key:e.text?t+"-"+v()(e.text.replace(/ /g,"-")):t},"icon-link"===e._type&&r.createElement(b.Z,{className:x,classes:{root:u()(a.noPadding,e.className)},size:e.size||"small",variant:e.variant||"contained",color:e.color||e.colorError&&"secondary"||"primary",onClick:function(t){return N(t,e)},disabled:e.disabled||g},r.createElement("a",{href:e.href},r.createElement(p.x,{titleInfoBulle:e.titleInfoBulle,name:e.iconName,size:e.iconSize||"40px",color:e.iconColor||"white"}))),"icon"===e._type&&r.createElement(b.Z,{className:x,classes:{root:u()(a.noPadding,e.className)},size:e.size||"small",variant:e.variant||"contained",color:e.color||e.colorError&&"secondary"||"primary",onClick:function(t){return N(t,e)},disabled:e.disabled||g,type:e.type||"button"},r.createElement(h,e,r.createElement(p.x,{titleInfoBulle:e.titleInfoBulle,name:e.iconName,size:e.iconSize||"40px",color:e.iconColor||"white"}),l[e.text]&&r.createElement(r.Fragment,null,"\xa0",r.createElement(y.Z,{size:12})))),"string"===e._type&&r.createElement(s.Z,{color:e.badgeColor,badgeContent:e.badgeContent},r.createElement(b.Z,{buttonRef:e.buttonRef,className:u()(x,e.className),size:e.size||"small",variant:e.variant||"contained",color:e.color||e.colorError&&"secondary"||"primary",onClick:function(t){return N(t,e)},disabled:e.disabled||g,style:e.style,id:e.id,type:e.type},e.text,l[e.text]&&r.createElement(r.Fragment,null,"\xa0",r.createElement(y.Z,{size:12})))),"dropdown"===e._type&&r.createElement(M,{className:x,size:e.size||"small",tabIndex:"-1",variant:e.variant||"contained",color:e.color||e.colorError&&"secondary"||"primary",onClick:function(t){return N(t,e)},disabled:e.disabled||g,options:e.options||[]},r.createElement(d.Z,{"aria-label":"More","aria-haspopup":"true"},r.createElement(p.x,{titleInfoBulle:e.titleInfoBulle,name:e.iconName,size:e.iconSize||"40px",color:e.iconColor||"white"}))),"component"===e._type&&r.createElement(s.Z,{color:e.badgeColor,badgeContent:e.badgeContent},r.createElement(b.Z,{className:u()(x,e.className),size:e.size||"small",variant:e.variant||"contained",color:e.color||e.colorError&&"secondary"||"primary",onClick:function(t){return N(t,e)},disabled:e.disabled||g,style:e.style,id:e.id},e.component,l[e.component]&&r.createElement(r.Fragment,null,"\xa0",r.createElement(y.Z,{size:12}))))):null}))};x.defaultProps={marginDirection:"left"},x.propTypes={buttons:g().arrayOf(E).isRequired,marginDirection:g().oneOf(["left","right","none"]),classes:g().objectOf(g().oneOfType([g().string,g().object]))};var N=(0,l.Z)((function(){return Object.assign({},{noPadding:{padding:"2px",minHeight:"32px",minWidth:"36px"}},{marginLeft:{marginLeft:"10px"},marginRight:{marginRight:"10px"},infoBulle:{border:"none",height:15,width:"auto",padding:"4px 10px",borderRadius:2,fontSize:10,fontWeight:500,boxShadow:"1px 5px 7px 0 rgba(0, 0, 0, 0.08)",backgroundColor:"#ffffff",color:"#464545",fontFamily:"basier_circlemedium"}})}))(x),I=n(22122),T=n(11473),j=n(13456),Z=function e(t){var n=r.useState(null),o=n[0],a=n[1],i=Boolean(o);function c(){a(null)}var s=t.children,l=t.options,m=t.classes,u=t.onClick;return r.createElement(r.Fragment,null,r.cloneElement(s,{onClick:function(e){a(e.currentTarget)}}),r.createElement(T.Z,{id:"long-menu",anchorEl:o,open:i,onClose:c,PaperProps:{style:{maxHeight:216}}},l.map((function(n,o){return n.options?r.createElement(e,(0,I.Z)({},t,{options:n.options,key:n.label+"-"+o}),r.createElement(j.Z,{key:n.value,onClick:function(){u(n.value),c()},classes:{root:m.menuItem}},n.label)):r.createElement(j.Z,{key:n.value,onClick:function(){u(n.value),c()},classes:{root:m.menuItem}},n.label)}))))};Z.defaultProps={children:function(){return r.createElement(p.x,{name:"icon-options",color:"#464545"})}},Z.propTypes={children:g().node,onClick:g().func.isRequired,options:g().arrayOf(g().shape()).isRequired};var M=(0,l.Z)((function(){return{menuItem:{"padding-top":"6px","padding-bottom":"6px","font-size":"13px"}}}))(Z)}}]);